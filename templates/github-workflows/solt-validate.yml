# =============================================================================
# VALIDATION WORKFLOW
# =============================================================================
# Generated by: solt-pre-commit setup-repo.py
# Calls the centralized reusable workflow from solt-pre-commit
#
# =============================================================================

name: Validate

on:
  pull_request:
    branches: [ main, master, develop, "17.0", "18.0" ]
  push:
    branches: [ main, master, develop, "17.0", "18.0" ]

jobs:
  validate:
    name: Solt Validation
    uses: soltein-net/solt-pre-commit/.github/workflows/solt-validate.yml@v1.0.0
    with:
      # ─── Basic Configuration ───
      python-version: '3.11'
      odoo-version: '17.0'

      # ─── Validation Scope ───
      # 'changed': Only files modified in PR (recommended for legacy repos)
      # 'full': Entire repository
      validation-scope: 'changed'

      # ─── Documentation Threshold ───
      docstring-threshold: 80  # Minimum % to show "passing" badge

      # ─── Coverage (optional) ───
      run-coverage: true
      coverage-threshold: 60

      # ─── Strictness Level ───
      fail-on-warnings: true
      show-info: false

      # ─── Badge Configuration ───
      # Replace with your Gist ID
      gist-id: 'YOUR_GIST_ID_HERE'
      badge-filename-prefix: 'solt-budget'

    secrets:
      GIST_SECRET: ${{ secrets.GIST_SECRET }}
